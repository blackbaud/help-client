<!DOCTYPE html>
<html lang="en">
<head>
  <title>help-client demo</title>
  <!--a hacky, get-it-done-now way to bring in styles from @skyux/theme-->
  <link rel="stylesheet" type="text/css"
        href="https://d1ed2bc0tt12m5.cloudfront.net/styles.c10433e4334ac7100968.css"/>
</head>
<body style="overflow: auto" onload="loadDemo()">
<main class="sky-padding-even-default">
  <h1>help-client demo</h1>
  <h2>Standard svcid configs</h2>
  <div class="sky-form-group">
    <button class="sky-btn sky-btn-default" onclick="unloadWidget()">Unload</button>
  </div>
  <div class="sky-form-group">
    <label for="locales" class="sky-control-label">Locale</label>
    <select class="sky-form-control" id="locales">
      <option value="">Unspecified</option>
    </select>
  </div>
  <ul id="svcid-configs"></ul>
  <script>
    function unloadWidget() {
      BBHELP.HelpWidget.unload();
    }

    function loadWidget(svcid) {
      unloadWidget();
      const locale = document.getElementById('locales').value;
      const config = { extends: svcid };
      if (locale) {
        config.locale = locale;
      }
      console.log(config)
      BBHELP.HelpWidget.load(config);
    }

    function loadSvcidList() {
      const svcids = [
        'admin', 'award-management', 'bbcrm', 'chrch', 'edu', 'faith', 'fenxt', 'fenxt(fenxt.cdev)', 'fenxt(fenxt.ate)',
        'fndlite', 'gmk', 'marketplace', 'renxt', 'smallgroups', 'stewardship-management', 'tcs'
      ];
      const list = document.getElementById('svcid-configs');
      svcids.forEach((id) => {
        const button = document.createElement('button');
        button.appendChild(document.createTextNode(id));
        button.setAttribute('class', 'sky-btn sky-btn-link');
        button.addEventListener('click', loadWidget.bind(null, id));
        const item = document.createElement('li');
        item.appendChild(button);
        list.appendChild(item);
      });
    }

    function loadLocales() {
      const locales = ['en-us', 'en-gb', 'en-ca', 'en-au', 'en-nz', 'es-mx', 'qa', 'fr'];
      const select = document.getElementById('locales');
      locales.forEach(locale => {
        const option = document.createElement('option');
        option.appendChild(document.createTextNode(locale));
        option.setAttribute('value', locale);
        select.appendChild(option);
      });
    }

    function loadDemo() {
      loadLocales();
      loadSvcidList();
    }
  </script>
</main>
</body>
</html>
